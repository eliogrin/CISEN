<assembly
        xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>assemble</id>
    <formats>
        <format>dir</format>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>resources</directory>
            <outputDirectory>.</outputDirectory>
        </fileSet>
    </fileSets>
    <moduleSets>
        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>
            <includes>                                              
                <include>com.epam.build.bot:cisen-core</include>
                <include>com.epam.build.bot:cisen-sms</include>
                <include>com.epam.build.bot:cisen-skype</include>
                <include>com.epam.build.bot:cisen-email</include>
                <include>com.epam.build.bot:cisen-teamcity</include>
                <include>com.epam.build.bot:cisen-jenkins</include>
                <include>com.epam.build.bot:cisen-status-changed-processor</include>
                <include>com.epam.build.bot:cisen-watchdog-processor</include>
                <include>com.epam.build.bot:cisen-daily-report-processor</include>
                <include>com.epam.build.bot:cisen-log4j-config</include>
                <include>com.epam.build.bot:commons</include>
            </includes>
            <binaries>
                <outputDirectory>bundle</outputDirectory>
                <outputFileNameMapping>
                    ${module.groupId}.${module.artifactId}-${module.version}${dashClassifier}.${module.extension}
                </outputFileNameMapping>
                <unpack>false</unpack>
            </binaries>
        </moduleSet>
    </moduleSets>
    <dependencySets>
        <dependencySet>
            <includes>
                <include>org.apache.felix:org.apache.felix.main</include>
            </includes>
            <outputDirectory>bin</outputDirectory>
            <outputFileNameMapping>felix.jar</outputFileNameMapping>
            <useProjectArtifact>false</useProjectArtifact>
        </dependencySet>
        <dependencySet>
            <includes>
                <include>org.apache.felix:org.apache.felix.gogo.shell</include>
                <include>org.apache.felix:org.apache.felix.gogo.runtime</include>
                <include>org.apache.felix:org.apache.felix.gogo.command</include>
                <include>org.apache.felix:org.apache.felix.bundlerepository</include>
                <include>org.apache.felix:org.apache.felix.configadmin</include>
                <include>org.apache.felix:org.apache.felix.metatype</include>
                <include>org.apache.felix:org.apache.felix.dependencymanager</include>
                <include>org.apache.felix:org.apache.felix.dependencymanager.shell</include>
                <include>org.apache.felix:org.apache.felix.dependencymanager.runtime</include>
                <include>org.apache.felix:org.apache.felix.dependencymanager.compat</include>
                <include>org.apache.felix:org.apache.felix.http.bundle</include>
                <include>org.apache.felix:org.apache.felix.eventadmin</include>
                <include>org.apache.felix:org.apache.felix.http.jetty</include>
                <include>org.apache.felix:org.apache.felix.webconsole</include>
                <include>org.apache.felix:org.apache.felix.log</include>
                <include>org.apache.felix:org.apache.felix.scr</include>
                <include>com.google.guava:guava</include>
                <include>commons-io:commons-io</include>
                <include>commons-fileupload:commons-fileupload</include>
                <include>org.mongodb:mongo-java-driver</include>
                <!--<include>commons-logging:commons-logging</include>-->
                <include>commons-codec:commons-codec</include>
                <include>commons-lang:commons-lang</include>
                <include>commons-net:commons-net</include>
                <include>net.sf.ehcache:ehcache</include>
                <!--<include>org.slf4j:slf4j-api</include>-->
                <!--<include>org.slf4j:slf4j-simple</include>-->
                <include>com.codahale.metrics:metrics-core</include>
                <!--<include>log4j:log4j</include>-->
                <include>org.jongo:jongo</include>
                <include>com.fasterxml.jackson.core:jackson-core</include>
                <include>com.fasterxml.jackson.core:jackson-annotations</include>
                <include>com.fasterxml.jackson.core:jackson-databind</include>
                <include>de.undercouch:bson4jackson</include>
                <include>org.apache.commons:commons-email</include>
                <include>javax.mail:mail</include>
                <include>com.eclipsesource.jaxrs:jersey-all</include>
                <include>com.eclipsesource.jaxrs:publisher</include>
                <include>com.eclipsesource.jaxrs:provider-gson</include>
                <include>com.google.code.gson:gson</include>
                <include>org.ops4j.pax.logging:pax-logging-service</include>
                <include>org.ops4j.pax.logging:pax-logging-api</include>
            </includes>

            <outputDirectory>bundle</outputDirectory>
            <outputFileNameMapping>
                ${artifact.artifactId}-${artifact.baseVersion}${dashClassifier?}.${artifact.extension}
            </outputFileNameMapping>
            <useProjectArtifact>false</useProjectArtifact>
        </dependencySet>
    </dependencySets>
</assembly>
